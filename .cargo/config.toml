# auto-tundra build configuration
# Optimized for M-series Apple Silicon (ARM64 + NEON + AES-NI)

[target.'cfg(target_arch = "aarch64")']
rustflags = ["-C", "target-cpu=native"]

[build]
jobs = 10

# Incremental compilation for faster rebuilds (enabled by default in dev, disabled in release)
incremental = true

# WASM-specific optimizations (aligned with release-wasm profile)
[target.wasm32-unknown-unknown]
rustflags = [
    "-C", "opt-level=z",       # Optimize for size (z = aggressive size optimization)
    "-C", "codegen-units=1",   # Single codegen unit for better optimization
    "-C", "panic=abort",       # Reduce binary size by removing unwinding code
    "-C", "strip=symbols",     # Strip symbols for smaller binary
]
